//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using Ajuna.NetApi.Model.PalletContracts;
using Ajuna.NetApi.Model.PrimitiveTypes;
using Ajuna.NetApi.Model.SpCore;
using Ajuna.NetApi.Model.Types.Base;
using Ajuna.NetApi.Model.Types.Primitive;
using Ajuna.RestService.Generated.Storage;
using Microsoft.AspNetCore.Mvc;
using System;
using System.Collections.Generic;
using System.Threading.Tasks;


namespace Ajuna.RestService.Generated.Controller
{
    
    
    /// <summary>
    /// ContractsController controller to access storages.
    /// </summary>
    [ApiController()]
    [Route("[controller]")]
    public sealed class ContractsController : ControllerBase
    {
        
        private IContractsStorage _contractsStorage;
        
        /// <summary>
        /// ContractsController constructor.
        /// </summary>
        public ContractsController(IContractsStorage contractsStorage)
        {
            _contractsStorage = contractsStorage;
        }
        
        /// <summary>
        /// >> PristineCode
        ///  A mapping from an original code hash to the original code, untouched by instrumentation.
        /// </summary>
        [HttpGet("PristineCode")]
        [ProducesResponseType(typeof(BaseVec<Ajuna.NetApi.Model.Types.Primitive.U8>), 200)]
        public IActionResult GetPristineCode(string key)
        {
            return this.Ok(_contractsStorage.GetPristineCode(key));
        }
        
        /// <summary>
        /// >> CodeStorage
        ///  A mapping between an original code hash and instrumented wasm code, ready for execution.
        /// </summary>
        [HttpGet("CodeStorage")]
        [ProducesResponseType(typeof(Ajuna.NetApi.Model.PalletContracts.PrefabWasmModule), 200)]
        public IActionResult GetCodeStorage(string key)
        {
            return this.Ok(_contractsStorage.GetCodeStorage(key));
        }
        
        /// <summary>
        /// >> AccountCounter
        ///  The subtrie counter.
        /// </summary>
        [HttpGet("AccountCounter")]
        [ProducesResponseType(typeof(Ajuna.NetApi.Model.Types.Primitive.U64), 200)]
        public IActionResult GetAccountCounter()
        {
            return this.Ok(_contractsStorage.GetAccountCounter());
        }
        
        /// <summary>
        /// >> ContractInfoOf
        ///  The code associated with a given account.
        /// 
        ///  TWOX-NOTE: SAFE since `AccountId` is a secure hash.
        /// </summary>
        [HttpGet("ContractInfoOf")]
        [ProducesResponseType(typeof(Ajuna.NetApi.Model.PalletContracts.RawContractInfo), 200)]
        public IActionResult GetContractInfoOf(string key)
        {
            return this.Ok(_contractsStorage.GetContractInfoOf(key));
        }
        
        /// <summary>
        /// >> DeletionQueue
        ///  Evicted contracts that await child trie deletion.
        /// 
        ///  Child trie deletion is a heavy operation depending on the amount of storage items
        ///  stored in said trie. Therefore this operation is performed lazily in `on_initialize`.
        /// </summary>
        [HttpGet("DeletionQueue")]
        [ProducesResponseType(typeof(BaseVec<Ajuna.NetApi.Model.PalletContracts.DeletedContract>), 200)]
        public IActionResult GetDeletionQueue()
        {
            return this.Ok(_contractsStorage.GetDeletionQueue());
        }
    }
}
